!function(e){var t=e.module("artmanager",["ionic","app.routes","app.views","ngResource","ngMaterial","ngAnimate","ngAria","ngMessages","ngMenuSidenav","toastr","controllers.appController","controllers.loginController","controllers.productionController","controllers.productionDetailController","controllers.orderController","controllers.orderListController","controllers.orderDetailController","controllers.userController","controllers.providerController","controllers.clientController","controllers.productController","controllers.productCountController","controllers.productRegisterController","controllers.employeeController","controllers.employeeDetailController","controllers.boxClosingController","services.loginService","services.utilService","services.userService","services.clientService","services.productService","services.employeeService","services.productionService","services.providerService","services.orderService","services.boxClosingService","filters.commonFilters","directives.filter-grid","ui.utils.masks"]);t.run(["$ionicPlatform",function(e){e.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault()})}]),t.config(["$mdThemingProvider","$mdGestureProvider",function(e,t){var r=e.extendPalette("light-blue",{contrastDefaultColor:"light",contrastDarkColors:["50"],50:"ffffff"});e.definePalette("customBlue",r),e.theme("default").primaryPalette("customBlue",{"default":"600","hue-1":"50"}).accentPalette("pink"),e.theme("input","default").primaryPalette("grey"),t.skipClickHijack()}]),t.config(["toastrConfig",function(t){e.extend(t,{autoDismiss:!0,timeOut:5e3,containerId:"toast-container",maxOpened:0,newestOnTop:!0,positionClass:"toast-top-center",preventDuplicates:!1,preventOpenDuplicates:!1,target:"body"})}])}(angular),function(e){var t=e.module("app.routes",[]);t.config(["$urlRouterProvider","$stateProvider","$ionicConfigProvider",function(e,t,r){r.views.maxCache(0);var o=t;o.state("app",{url:"/app","abstract":!0,templateUrl:"templates/common/menu.html",controller:"AppCtrl",controllerAs:"vm"}),o.state("login",{url:"/login",templateUrl:"templates/login/login.html",controller:"LoginCtrl",controllerAs:"vm"}),o.state("app.production",{url:"/production",title:"Produção",views:{menuContent:{templateUrl:"templates/production/production-items.html",controller:"ProductionCtrl",controllerAs:"vm"}}}),o.state("app.productionDetail",{url:"/production/:item",title:"Detalhes Produto",views:{menuContent:{templateUrl:"templates/production/production-product-detail.html",controller:"ProductionDetailCtrl",controllerAs:"vm"}}}),o.state("app.createOrder",{url:"/createOrder",title:"Cadastrar Pedido",views:{menuContent:{templateUrl:"templates/order/form-order.html",controller:"OrderCtrl",controllerAs:"vm"}}}),o.state("app.orders",{url:"/orders",title:"Pedidos",views:{menuContent:{templateUrl:"templates/order/orders.html",controller:"OrderListCtrl",controllerAs:"vm"}}}),o.state("app.orderDetail",{url:"/order/:item",title:"Detalhes do Pedido",views:{menuContent:{templateUrl:"templates/order/order-detail.html",controller:"OrderDetailCtrl",controllerAs:"vm"}}}),o.state("app.createUser",{url:"/createUser",title:"Cadastrar Usuário",views:{menuContent:{templateUrl:"templates/user/form-user.html",controller:"UserCtrl",controllerAs:"vm"}}}),o.state("app.createClient",{url:"/createClient/:clientName",title:"Cadastrar Clientes",views:{menuContent:{templateUrl:"templates/client/form-client.html",controller:"ClientCtrl",controllerAs:"vm"}}}),o.state("app.createProvider",{url:"/createProvider/:providerName",title:"Cadastrar Fornecedor",views:{menuContent:{templateUrl:"templates/provider/form-provider.html",controller:"ProviderCtrl",controllerAs:"vm"}}}),o.state("app.createProduct",{url:"/createProduct/:productName",title:"Cadastrar Produtos",views:{menuContent:{templateUrl:"templates/product/form-products.html",controller:"ProductRegisterCtrl",controllerAs:"vm"}}}),o.state("app.products",{url:"/products",title:"Produtos",views:{menuContent:{templateUrl:"templates/product/products.html",controller:"ProductCtrl",controllerAs:"vm"}}}),o.state("app.productsCount",{url:"/products/count",title:"Produtos Vendidos",views:{menuContent:{templateUrl:"templates/product/products-count.html",controller:"ProductCountCtrl",controllerAs:"vm"}}}),o.state("app.employees",{url:"/employees",title:"Fornecedores",views:{menuContent:{templateUrl:"templates/employee/employees.html",controller:"EmployeeCtrl",controllerAs:"vm"}}}),o.state("app.employeesDetail",{url:"/employees/:item",title:"Detalhes",views:{menuContent:{templateUrl:"templates/employee/employees-detail.html",controller:"EmployeeDetailCtrl",controllerAs:"vm"}}}),o.state("app.boxClosing",{url:"/boxClosing",title:"Caixa",views:{menuContent:{templateUrl:"templates/boxClosing/boxClosing.html",controller:"BoxClosingCtrl",controllerAs:"vm"}}}),e.otherwise("/login")}])}(angular),function(){"use strict";function e(e,t,r,o,n){var i=this;i.index=0,i.toggleSidenav=function(e){n(e).toggle()},i.openSidenav=function(e){n(e).open()},i.closeSidenav=function(e){n(e).close()},i.currentTitle=function(){return r.current.title},i.topDirections=["left","up"],i.bottomDirections=["down","right"],i.isOpen=!1,i.availableModes=["md-fling","md-scale"],i.selectedMode="md-fling",i.availableDirections=["up","down","left","right"],i.selectedDirection="up"}angular.module("controllers.appController",[]).controller("AppCtrl",e),e.$inject=["$ionicModal","$ionicPopover","$state","$rootScope","$mdSidenav"]}(),function(){"user strict";function e(e,t,r,o,n,i){function a(){f.isFormPassword=!1}function c(){f.isFormPassword=!0}function s(){var e={user:f.user.email};t.resendPassword(e).then(l,u)}function l(e){e.error?n.error(e.success.error):e.success&&n.success("Um email foi encaminhado para redefinição de senha"),console.log("success",e)}function u(e){n.error("Erro ao realizar sua solicitação"),console.log("error",e)}function d(r){return i.hide(),r.error?void n.error("Usuario ou senha inválidos.","Autenticação"):(o.removeCSS("app/login/login.css"),console.log("token",r),t.setAuthToken(r),void e.go("app.production"))}function p(){i.hide(),n.error("Não foi possivel conectar ao servidor.","Erro!")}var f=this;f.user={name:"",password:""},f.isFormPassword=!1,f.showFormPassword=c,f.showLogin=a,f.sendPassword=s,f.login=function(e){var r={data:btoa(f.user.name+"-"+f.user.password)};i.show(),t.login(r).then(d,p)}}angular.module("controllers.loginController",[]).controller("LoginCtrl",e),e.$inject=["$state","LoginService","LocalStorageService","UtilService","toastr","LoadingPopup"]}(),function(e){function t(e,t,r,o,n,i){function a(e){var t=new Date,r=new Date(e.delivery_date);return e.date=n.formatToLocaleDate(r),e.status=c(t,r),e}function c(e,t){var r=n.daysBetween(e,t);return 20>r?0:r>20&&40>r?1:r>40?2:null}function s(){var e=[],t={};return t.value="delivery_date",t.desc="Entrega",e.push(t),t={},t.value="name",t.desc="Nome",e.push(t),e}var l=this;t("statusColor");l.items=[],l.order="",l.detail=function(t){var r=JSON.stringify(t);e.go("app.productionDetail",{item:r})},l.filters=s(),function(){l.order="delivery_date",i.show(),r.get().then(function(e){var t=e.success;console.log("productions",t),t&&(l.items=t.map(a)),i.hide()})}()}e.module("controllers.productionController",[]).controller("ProductionCtrl",t),t.$inject=["$state","$filter","ProductionService","toastr","DateService","LoadingPopup"]}(angular),function(e){function t(e,t,r,o,n){function i(){var e=l.item.percentage;if(100===e){var o=confirm("Deseja concluir produção?");if(!o)return}var n=l.item.id,i={percentage:e,id:n};r.show(),t.updateStatus(i).then(a,c)}function a(e){e.success?(n.go("app.production"),o.success("Operação realizada com sucesso!")):e.error&&o.error("Erro ao realizar sua solicitacao"),r.hide()}function c(e){console.log("success",e),r.hide(),o.error("Erro ao realizar sua solicitacao")}function s(){n.go("app.production")}var l=this,u=e.item;l.item=JSON.parse(u),console.log("item",l.item),l.updateStatus=i,l.back=s}e.module("controllers.productionDetailController",[]).controller("ProductionDetailCtrl",t),t.$inject=["$stateParams","ProductionService","LoadingPopup","toastr","$state"]}(angular),function(e){function t(t,r,o,n,i,a,c){function s(){U(),R()}function l(){var e={};c.show(),e.client={id:$.client.value},e.user={id:$.userId},e.which={total_value:$.order.total_value,entrance:$.order.entrance,discount:$.order.discount},e.products=$.order.products.map(function(t){var r={id:t.id,describe:t.describe,quantity:t.quantity};return t.sendDate&&(e.production={delivery_date:t.sendDate}),r}),r.debug("order",e),t.create(e).then(d,u)}function u(e){c.hide(),r.error("onCreateError",e),a.error("Erro interno no servidor")}function d(e){c.hide(),r.debug("onCreateSuccess",e),e.success?(a.success("Pedido registrado com sucesso !"),o.go("app.orders")):e.error&&a.error("Não Foi possivel registrar seu pedido: "+e.error)}function p(){$.showFormPayment=!1,$.showFormOrder=!0}function f(){$.showDetailOrder=!1,$.showFormPayment=!0}function m(e){$.order.products.pop(e)}function h(){$.showFormPayment=!$.showFormPayment,$.showFormOrder=!$.showFormPayment}function v(){var t=$.order.discount||0,r=$.order.entrance||0,o=e.copy($.order.total_value),n=$.order.total_value-(t+r);$.order.total_value=o,$.order.pending_value=n,$.showDetailOrder=!0,$.showFormPayment=!1}function g(){h(),$.order.total_value=0,$.order.products.forEach(function(e){$.order.total_value+=parseFloat(e.quantity)*parseFloat(e.sale_cost)}),console.log("vm.order.total_value",$.order.total_value)}function C(e){e&&(e.$setPristine(),e.$setUntouched()),$.searchTextProduct="",$.selectedClient={},$.selectedProduct={}}function S(e){$.selectedProduct&&($.order.products.push($.selectedProduct),C(e))}function P(e){o.go("app.createClient",{clientName:$.searchTextClient})}function T(e){var t={productName:$.searchTextProduct};console.log("obj",t),o.go("app.createProduct",t)}function E(t){if(!$.clients)return void a.success("Aguarde...");t=e.lowercase(t);var r=t?$.clients.filter(function(r){return e.lowercase(r.display).indexOf(t)>=0}):$.clients;return r}function D(t){if(!$.products)return void a.success("Aguarde...");t=e.lowercase(t);var r=t?$.products.filter(function(r){return e.lowercase(r.display).indexOf(t)>=0}):$.products;return r}function y(e){r.info("Text changed to "+e)}function O(e){r.info("Text changed to "+e)}function w(e){$.showFormProduct=!0,$.selectedClient=e,$.client=e,r.info("Item changed to "+JSON.stringify(e))}function _(e){if(e){var t=$.productsModel.filter(function(t){return t.id==e.value});$.selectedProduct=t[0],$.selectedProduct.client={id:$.client.value},$.selectedProduct.user={id:$.userId},$.selectedProduct.quantity=1,$.showButtons=!0,r.info("Item changed to "+JSON.stringify(t[0]))}}function R(){n.get().then(function(e){if(e.error)return void a.error("Erro ao carregar clientes");if(e.data){var t=e.data.clients.map(function(e){return{value:e.id,display:e.name}});$.clients=t}})}function U(){i.products().then(function(t){var r=t.products[0];if(console.log("products",r),r){$.productsModel=r;var o=e.copy(r);console.log("itens",o),o=o.map(function(e){return{value:e.id,display:e.name}}),$.products=o}})}var $=this;$.showFormProduct=!1,$.userId=1,$.products=[],$.productsModel=[],$.order={products:[]},$.searchTextClient="",$.searchTextProduct="",$.selectedProduct={},$.selectedClient={},$.client={},$.showFormProduct=!1,$.showButtons=!1,$.showFormOrder=!0,$.showFormPayment=!1,$.showDetailOrder=!1,$.addToOrder=S,$.toPaymentOrder=g,$.resetFields=C,$.removeItem=m,$.finishOrder=v,$.backToPayment=f,$.backToFormOrder=p,$.create=l,$.querySearchClient=E,$.querySearchProduct=D,$.selectedItemChangeClient=w,$.selectedItemChangeProduct=_,$.searchTextChangeClient=y,$.searchTextChangeProduct=O,$.newClient=P,$.newProduct=T,s()}e.module("controllers.orderController",[]).controller("OrderCtrl",t),t.$inject=["OrderService","$log","$state","ClientService","ProductService","toastr","LoadingPopup"]}(angular),function(e){function t(t,r,o,n,i,a,c){function s(){p()}function l(e){return e.order.products.map(u),e.countProducts=e.order.products.length,e}function u(e){E+=e.quantity}function d(e){e.creationDate=n.formatToLocaleDate(new Date(e.creationDate));var t=e.order.products.map(function(e){return e.delivery_date=n.formatToLocaleDate(new Date(e.delivery_date)),e});return e.order.products=t,e}function p(){c.show();var r=T.initialDate||new Date(0),o=T.finalDate||new Date,n={dt_from:r.toISOString(),dt_to:o.toISOString()};T.items=[],console.log("obj",n),t.get(n).then(function(t){c.hide();var r=t.success;console.log("items.success",t.success),r&&(T.items=r.map(d).map(l),T.itemsFilter=e.copy(T.items))})}function f(){var e=[],t={};return t.value="creationDate",t.desc="Criação",e.push(t),t={},t.value="client.name",t.desc="Cliente",e.push(t),e}function m(e){alert("Sorry! You'll need to create a Constituion for "+e+" first!")}function h(t){t=e.lowercase(t);var r=t?T.clients.filter(function(r){return e.lowercase(r.display).indexOf(t)>=0}):T.clients;return r}function v(t){var r=e.copy(T.itemsFilter),o=r.filter(function(r){var o=e.lowercase(t),n=e.lowercase(r.client.name);return"undefined"!=typeof n?(console.log("clientName: "+o+" clientOrderName: "+n),e.lowercase(n).indexOf(o)>=0):void 0});console.log("itensFilters",o),T.items=[],T.items=o}function g(e){r.info("Text changed to "+e),v(e)}function C(e){r.info("Item changed to "+JSON.stringify(e)),e&&v(e.display)}function S(){i.get().then(function(e){if(e.error)return void a.error("Erro ao carregar clientes");if(e.data){var t=e.data.clients.map(function(e){return{value:e.id,display:e.name}});T.clients=t}})}function P(e){var t=JSON.stringify(e);console.log(t),o.go("app.orderDetail",{item:t})}var T=this;T.filters=f(),T.clients=[],T.items=[],T.itemsFilter=[],T.querySearch=h,T.selectedItemChange=C,T.searchTextChange=g,T.newState=m,T.detail=P,T.countProducts=0,T.search=s,T.initialDate=null,T.finalDate=null;var E=0;!function(){T.order="delivery_date",p(),S()}()}e.module("controllers.orderListController",[]).controller("OrderListCtrl",t),t.$inject=["OrderService","$log","$state","DateService","ClientService","toastr","LoadingPopup"]}(angular),function(e){function t(e,t,r,o,n,i){function a(){r.go("app.orders")}function c(){var t={id:p.item.id,entrance:p.pendingValue};i.show(),e.updateStatus(t).then(u,d)}function s(){var t={id:p.item.id,pendingFallback:!0,entrance:0};i.show(),e.updateStatus(t).then(u,d)}function l(){var e=p.item.order,t=e.discount+e.entrance-e.total<0;return console.log(t),t}function u(e){i.hide(),e.success?n.success("Valor Atualizado com sucesso!"):e.error&&n.error("Erro ao atualizar pedido")}function d(e){n.error("Erro ao atualizar pedido"+e),i.hide()}var p=this;p.item=JSON.parse(r.params.item),console.log("vm.item",p.item),p.updateValuePayment=c,p.registerFallbackProducts=s,p.orderPendingPayment=l(),p.back=a}e.module("controllers.orderDetailController",[]).controller("OrderDetailCtrl",t),t.$inject=["OrderService","$log","$state","DateService","toastr","LoadingPopup"]}(angular),function(){function e(e,t,r,o,n,i){function a(e){return i.hide(),e.error?void n.error(e.error):(n.success("Usuario cadastrado com sucesso!"),void setTimeout(function(){t.go("app.orders")},1e3))}function c(){i.hide(),n.error("Não foi possivel conectar ao servidor.","Erro!")}var s=this;s.create=function(){console.log(s.user),i.show(),s.user.profile=1;var e={user:s.user};o.create(e).then(a,c)}}angular.module("controllers.userController",["ngSanitize"]).controller("UserCtrl",e),e.$inject=["$rootScope","$state","$timeout","UserService","toastr","LoadingPopup"]}(),function(){"user strict";function e(e,t,r,o,n,i,a){function c(t){return i.hide(),console.log("obj",t),void 0!==t.error?void a.error("Erro ao cadastrar fornecedor",t.error):(a.success("Cadastro efetuado com sucesso."),l.itemName&&e.go("app.createProduct",{providerName:l.provider.name}),e.go("app.createOrder"),void(l.provider={}))}function s(e){i.hide()}var l=this,u={personalData:!0,location:!1},d=[{id:1,description:"FIXO"},{id:3,description:"CELULAR"}];l.provider={},l.provider.phones=[],l.phoneTypes=d,l.content=u,l.itemName=r.providerName,l.itemName&&(l.provider.name=l.itemName),l.toggleForm=function(){l.content.personalData=!1,l.content.location=!0},l.create=function(e){i.show();var t={supplier:l.provider};n.create(t).then(c,s)},l.goBack=function(){l.content.personalData=!0,l.content.location=!1}}angular.module("controllers.providerController",[]).controller("ProviderCtrl",e),e.$inject=["$state","$timeout","$stateParams","LocalStorageService","ProviderService","LoadingPopup","toastr"]}(),function(e){function t(e,t,r,o,n){function i(e){return r.hide(),n.success("Cliente cadastrado com sucesso"),c.user.client.name?void o.go("app.createOrder"):void o.go("app.orders")}function a(e){r.hide()}var c=this;c.isFormUser=!0,c.isFormLocation=!1;var s=[{id:1,description:"FIXO"},{id:2,description:"CELULAR"}],l=o.params.clientName;console.log("clientName",l),c.phoneTypes=s,c.user={},c.user.client={},c.user.phone=[],l&&(c.user.client.name=l),c.create=function(){r.show(),t.create(c.user).then(i,a)},c.nextContato=function(){u(),c.isFormContact=!0},c.nextLocation=function(){u(),c.isFormLocation=!0},c.goBack=function(e){switch(u(),e){case"user":c.isFormUser=!0;break;default:c.isFormContato=!0}};var u=function(){c.isFormUser=!1,c.isFormLocation=!1}}var r=e.module("controllers.clientController",["ngSanitize"]);t.$inject=["$timeout","ClientService","LoadingPopup","$state","toastr"],r.controller("ClientCtrl",t)}(angular),function(e){function t(e,t,r){function o(){n()}function n(){r.show();var e=c.initialDate||new Date(0),o=c.finalDate||new Date,n={dt_from:e.toISOString(),dt_to:o.toISOString()};t.report(n).then(function(e){r.hide(),console.log("itens",e);var t=e.success;t&&(t=t.map(function(e){return e.date=i(e.month,e.year),e}),console.log("products",t),c.items=t,c.itemsFilter=t)})}function i(e,t){return e=e>=10?e:"0"+e,e+"/"+t}function a(){var e=[],t={};return t.value="name",t.desc="Nome",t.selected=!0,e.push(t),t={},t.value="quantity",t.desc="Quantidade",t.selected=!1,e.push(t),t={},t.value="sale_cost",t.desc="Preco de Venda",t.selected=!1,e.push(t),t={},t.value="cost",t.desc="Preco de Custo",t.selected=!1,e.push(t),e}var c=this;c.items=[],c.order="nome",c.ascending=!0,c.initialDate=null,c.finalDate=null,c.itemsFilter=[],c.search=o,c.filters=a(),function(){n()}()}e.module("controllers.productController",[]).controller("ProductCtrl",t),t.$inject=["$timeout","ProductService","LoadingPopup"]}(angular),function(e){function t(e){function t(){var t=o.initialDate||new Date(0),r=o.finalDate||new Date,n={dt_from:t.toISOString(),dt_to:r.toISOString()};e.productsCountMonth(n).then(function(e){o.item=e,console.log(e)})}function r(){t()}var o=this;o.item=[],o.itemsFilter=[],o.search=r,o.initialDate=null,o.finalDate=null,function(){t()}()}e.module("controllers.productCountController",[]).controller("ProductCountCtrl",t),t.$inject=["ProductService"]}(angular),function(){"user strict";function e(e,t,r,o,n,i,a){function c(){r.show(),n.get().then(function(t){if(r.hide(),t.error)return void e.error("Erro ao carregar Fornecedores");var o=t.supplier;if(o){var n=o.map(function(e){return{value:e.id,display:e.name}});y.suppliers=n}})}function s(){r.show(),t.categories().then(function(t){if(r.hide(),t.error)return void e.error("Erro ao carregar Categorias");var o=t.productCategory;if(o){var n=o.map(function(e){return{value:e.id,display:e.describe}});y.categories=[],y.categories=n}})}function l(){var e=y.content.personalData;y.content.personalData=!e,y.content.cost=e}function u(){r.show();try{y.product.size=(y.product.size||0)+"",y.product.weight=(y.product.weight||0)+"",y.product.id_product_category=y.selectedCategory.value,y.product.id_supplier=y.selectedSupplier.value,console.log(y.product),t.create(y.product).then(p,f)}catch(o){console.log(o),e.error("Erro ao cadastrar produto"),r.hide()}}function d(){y.toggleForm()}function p(t){t.error&&e.error("Erro, contate o suporte.","Não foi possivel cadastrar"),e.success(t.success),y.product={},r.hide(),y.productName&&o.go("app.createOrder")}function f(t){e.error("Erro, contate o suporte.","Não foi possivel cadastrar"),r.hide()}function m(e){o.go("app.createProvider",{providerName:y.searchTextSupplier})}function h(e){var o={describe:y.searchTextCategory};r.show(),t.createCategory(o).then(v,g)}function v(t){r.hide(),t.success?e.success("Categoria cadastrada com sucesso !"):t.error&&e.error("Erro ao cadastrar categoria"),s()}function g(t){r.hide(),e.error("Erro ao cadastrar categoria")}function C(t){if(!y.suppliers)return void e.success("Aguarde...");t=angular.lowercase(t);var r=t?y.suppliers.filter(function(e){return angular.lowercase(e.display).indexOf(t)>=0}):y.suppliers;return r}function S(t){if(!y.categories)return void e.success("Aguarde...");t=angular.lowercase(t);var r=t?y.categories.filter(function(e){return angular.lowercase(e.display).indexOf(t)>=0}):y.categories;return r}function P(e){i.info("Text changed to "+e)}function T(e){i.info("Text changed to "+e)}function E(e){y.selectedSupplier=e,y.supplier=e,i.info("Item changed to "+JSON.stringify(e))}function D(e){y.selectedCategory=e,y.category=e,i.info("Item changed to "+JSON.stringify(e))}var y=this;y.content={personalData:!0,cost:!1},y.product={},y.suppliers=[],y.categories=[],y.toggleForm=l,y.create=u,y.goBack=d,y.searchTextSupplier="",y.searchTextCategory="",y.selectedSupplier={},y.selectedCategory={},y.supplier={},y.category={},y.productName=a.productName,y.productName&&(y.product.name=y.productName),y.querySearchSupplier=C,y.querySearchCategory=S,y.selectedItemChangeSupplier=E,y.selectedItemChangeCategory=D,y.searchTextChangeSupplier=P,y.searchTextChangeCategory=T,y.newSupplier=m,y.newCategory=h,function(){c(),s()}()}angular.module("controllers.productRegisterController",[]).controller("ProductRegisterCtrl",e),e.$inject=["toastr","ProductService","LoadingPopup","$state","ProviderService","$log","$stateParams"]}(),function(e){function t(e,t,r){function o(){var e=c.initialDate||new Date(0),r=c.finalDate||new Date,o={dt_from:e.toISOString(),dt_to:r.toISOString()};console.log("obj",o),t.reportSupplier(o).then(function(e){var t=e.success;c.items=t,console.log("items",t)})}function n(){var e=[],t={};return t={},t.value="supplier",t.desc="Nome",e.push(t),t={},t.value="total",t.desc="Valor a Receber",e.push(t),e}function i(e){var t=JSON.stringify(e);r.go("app.employeesDetail",{item:t})}function a(){o()}var c=this;c.items=[],c.itemsFilter=[],c.order="fornecedor",c.ascending=!0,c.initialDate=null,c.finalDate=null,c.search=a,c.toDetail=i,c.filters=n(),function(){o()}()}e.module("controllers.employeeController",[]).controller("EmployeeCtrl",t),t.$inject=["$timeout","EmployeeService","$state"]}(angular),function(e){function t(e,t,r){function o(){var e=i.item.month>=10?i.item.month:"0"+i.item.month;return e+"/"+i.item.year}function n(){r.go("app.employees")}var i=this,a=e.item;i.item=JSON.parse(a),i.backToEmployees=n,i.dateRef=o()}e.module("controllers.employeeDetailController",[]).controller("EmployeeDetailCtrl",t),t.$inject=["$stateParams","EmployeeService","$state"]}(angular),function(e){function t(e,t,r){function o(){r.show();var t=l.initialDate||new Date(0),o=l.finalDate||new Date,n={dt_from:t.toISOString(),dt_to:o.toISOString()};e.get(n).then(c,s)}function n(e,t){return e=e>=10?e:"0"+e,e+"/"+t}function i(){var e=[],t={};return t={},t.value="date",t.desc="Data",e.push(t),t={},t.value="total",t.desc="Total",e.push(t),t={},t.value="totalCommission",t.desc="Comissoes",e.push(t),t={},t.value="totalSaleProducts",t.desc="Vendas",e.push(t),t={},t.value="totalProductionProducts",t.desc="Produção",e.push(t),t={},t.value="totalProductionPending",t.desc="Pendencias",e.push(t),e}function a(){o()}function c(e){r.hide();var t=e.success.map(function(e){return e.date=n(e.month,e.year),e});l.items=t,l.itemsFilter=t}function s(e){r.hide(),t.error("Não foi possivel carregar os itens")}var l=this;l.items=[],l.itemsFilter=[],l.initialDate=null,l.finalDate=null,l.search=a,l.filters=i(),l.dateRef=n,function(){o()}()}e.module("controllers.boxClosingController",[]).controller("BoxClosingCtrl",t),t.$inject=["BoxClosingService","toastr","LoadingPopup"]}(angular),function(){"use strict";function e(e,t,r,o,n){function i(t){return e({method:"POST",url:r.CREATE_PROVIDER_URL,data:t,headers:n.headers()}).then(function(e){return e.data})}function a(){return e.get(r.GET_PROVIDER_URL,{headers:n.headers()}).then(function(e){return e.data})}return{create:i,get:a}}angular.module("services.providerService",[]).service("ProviderService",e),e.$inject=["$http","$q","ConstantsService","toastr","AuthService"]}(),function(e){var t=e.module("services.boxClosingService",[]);t.service("BoxClosingService",["$q","$http","ConstantsService","AuthService",function(e,t,r,o){function n(e){return t({method:"POST",data:e,url:r.GET_REPORT_SALES,headers:o.headers()}).then(function(e){return e.data})}return{get:n}}])}(angular),function(){"use strict";function e(e,t,r){function o(e){localStorage.token=e.token}function n(){e.defaults.headers.common[r.ACCESS_TOKEN_KEY]=""}function i(){n()}function a(t){return console.log(t),e.post(r.LOGIN_URL,t).then(function(e){return e.data})}function c(t){return e({method:"POST",url:r.RESEND_PASSWORD_URL,data:t,config:{timeout:5e4}}).then(function(e){return e.data})}return{login:a,logout:i,setAuthToken:o,resendPassword:c}}angular.module("services.loginService",[]).service("LoginService",e),e.$inject=["$http","$resource","ConstantsService"]}(),function(e){function t(e,t,r,o){function n(){return t({method:"GET",url:r.GET_PRODUCTION_URL,headers:o.headers()}).then(function(e){return e.data})}function i(e){return t({method:"PUT",url:r.UPDATE_STATUS_PRODUCTION,data:e,headers:o.headers()}).then(function(e){return e.data})}return{get:n,updateStatus:i}}e.module("services.productionService",[]).service("ProductionService",t),t.$inject=["$q","$http","ConstantsService","AuthService"]}(angular),function(e){function t(e,t,r,o){function n(e){return t({method:"POST",url:r.CREATE_ORDER_URL,data:e,headers:o.headers()}).then(function(e){return e.data})}function i(e){return t({method:"POST",data:e,url:r.GET_ORDER_URL,headers:o.headers()}).then(function(e){return e.data})}function a(e){return t({method:"PUT",url:r.UPDATE_PRODUCTION_STATUS,data:e,headers:o.headers()}).then(function(e){return e.data})}return{create:n,get:i,updateStatus:a}}e.module("services.orderService",[]).service("OrderService",t),t.$inject=["$q","$http","ConstantsService","AuthService"]}(angular),function(){"use strict";function e(e,t,r,o){function n(t){return e({method:"POST",url:r.CREATE_USER_URL,data:t,headers:o.headers()}).then(function(e){return e.data})}function i(){return e.get(r.GET_CLIENT_URL,{headers:o.headers()}).then(function(e){return e})}return{create:n,get:i}}angular.module("services.userService",[]).service("UserService",e),e.$inject=["$http","$q","ConstantsService","AuthService"]}(),function(){"use strict";function e(e,t,r,o,n){function i(t){return e({method:"POST",url:r.CREATE_CLIENT_URL,data:t,headers:n.headers()}).then(function(e){return e.data})}function a(){return e.get(r.GET_CLIENT_URL,{headers:n.headers()}).then(function(e){return e})}return{create:i,get:a}}angular.module("services.clientService",[]).service("ClientService",e),e.$inject=["$http","$q","ConstantsService","toastr","AuthService"]}(),function(e){function t(e,t,r,o){function n(e){return t({method:"POST",url:r.CREATE_PRODUCT_URL,data:e,headers:o.headers()}).then(function(e){return e.data})}function i(e){return t({method:"POST",url:r.REPORT_PRODUCTS,data:e,headers:o.headers()}).then(function(e){return e.data})}function a(){return t({method:"GET",url:r.GET_PRODUCT_URL,headers:o.headers()}).then(function(e){return e.data})}function c(e){return t({method:"POST",url:r.CREATE_CATEGORIES_PRODUCTS,data:e,headers:o.headers()}).then(function(e){return e.data})}function s(){return t({method:"GET",url:r.GET_CATEGORIES_PRODUCTS,headers:o.headers()}).then(function(e){return e.data})}function l(t){var r=e.defer();return r.resolve([]),r.promise}return{products:a,report:i,categories:s,createCategory:c,productsCountMonth:l,create:n}}e.module("services.productService",[]).service("ProductService",t),t.$inject=["$q","$http","ConstantsService","AuthService"]}(angular),function(e){var t=e.module("services.employeeService",[]);t.service("EmployeeService",["$q","$http","ConstantsService","AuthService",function(e,t,r,o){function n(e){return t({method:"POST",data:e,url:r.GET_PROVIDER_REPORT_URL,headers:o.headers()}).then(function(e){return e.data})}function i(e){return t({method:"GET",data:e,url:r.GET_PROVIDER_URL,headers:o.headers()}).then(function(e){return e.data})}return{employess:i,reportSupplier:n}}])}(angular),function(e){function t(e){var t=e+"authentication",r=e+"users",o=e+"client",n=e+"supplier",i=e+"product",a=e+"which",c=e+"production";this.LOGIN_URL=t,this.CREATE_USER_URL=r,this.RESEND_PASSWORD_URL=e+"sendTokenToEmail",this.CREATE_CLIENT_URL=o,this.GET_CLIENT_URL=o,this.CREATE_PROVIDER_URL=n,this.GET_PROVIDER_URL=n,this.CREATE_PRODUCT_URL=i,this.GET_PRODUCT_URL=i,this.CREATE_ORDER_URL=a,this.GET_ORDER_URL=a,this.ACCESS_TOKEN_KEY="x-access-token",this.GET_PRODUCTION_URL=c,this.UPDATE_STATUS_PRODUCTION=c,this.UPDATE_PRODUCTION_STATUS=e+"updateEntrancePending",this.REPORT_PRODUCTS=e+"reportProduct",this.GET_CATEGORIES_PRODUCTS=e+"productCategory",this.CREATE_CATEGORIES_PRODUCTS=e+"productCategory",this.GET_PROVIDER_REPORT_URL=e+"reportSupplier",this.GET_REPORT_SALES=e+"reportSales"}function r(){return{get:function(e){return localStorage[e]||null},set:function(e,t){localStorage[e]=t},clear:function(e){localStorage[e]=null}}}function o(){function e(e){var t=document.querySelector("[href='"+e+"']");t.parentNode.removeChild(t)}return{removeCSS:e}}function n(e,t){function r(){e.hide()}function o(){t.cancel=e.hide,e.show({template:'<button class="button button-clear" style="line-height: normal; min-height: 0; min-width: 0;"ng-click="cancel()"><i class="ion-close-circled"></i></button> Carregando...',showBackdrop:!0,hideOnStateChange:!0,animation:"fade-in",scope:t})}return{show:o,hide:r}}function i(){function e(){return{"x-access-token":localStorage.token}}return{headers:e}}function a(){function e(e){var t=new Date(e);return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t}function t(t,r){var o=864e5;return(e(r)-e(t))/o}function r(e){var t=e.getMonth()+1,r=t>=10?t:"0"+t,o=e.getDate()+"/"+r+"/"+e.getFullYear();return o}return{daysBetween:t,formatToLocaleDate:r}}var c=e.module("services.utilService",[]);c.constant("BASE_API_URL","http://api.artmanager.com.br/"),c.service("ConstantsService",t),t.$inject=["BASE_API_URL"],c.factory("LocalStorageService",r),c.factory("UtilService",o),c.factory("LoadingPopup",n),n.$inject=["$ionicLoading","$rootScope"],c.factory("AuthService",i),c.factory("DateService",a)}(angular),function(e){function t(){function e(e){if("string"==typeof e)throw new TypeError("statusColor - The status must be an integer");if(e>t.length)throw new RangeError("statusColor - the informed status is incorrect");return t[e]}var t=["red","yellow","green"];return e}var r=e.module("filters.commonFilters",[]);r.filter("statusColor",t)}(angular),function(e){function t(){function e(e,t,r,o){e.ascending=e.$parent.ascending||!1,e.order=e.$parent.order||e.filters[0].value,e.$watch("order",function(t){e.$parent.order=t,e.order=t,console.log(t)}),e.$watch("ascending",function(t){e.$parent.ascending=t,e.ascending=t,console.log(t)})}var t={restrict:"E",templateUrl:"app/common/directives/templates/filter-grid.html",require:"^ngController",scope:{filters:"=",order:"="},link:e};return t}e.module("directives.filter-grid",[]).directive("filterGrid",t)}(angular);